# Cross.toml â€” Configuration for the `cross` tool
# Provides the right system libraries for cross-compiling sc-agent

[target.aarch64-unknown-linux-gnu]
# sc-agent needs: GTK3/WebKit (for tao/wry), glib/gio (for zbus), protobuf, openssl
pre-build = [
    "dpkg --add-architecture $CROSS_DEB_ARCH",
    "apt-get update && apt-get install -y protobuf-compiler libgtk-3-dev:$CROSS_DEB_ARCH libwebkit2gtk-4.1-dev:$CROSS_DEB_ARCH libssl-dev:$CROSS_DEB_ARCH libglib2.0-dev:$CROSS_DEB_ARCH libayatana-appindicator3-dev:$CROSS_DEB_ARCH || apt-get install -y protobuf-compiler libgtk-3-dev:$CROSS_DEB_ARCH libwebkit2gtk-4.1-dev:$CROSS_DEB_ARCH libssl-dev:$CROSS_DEB_ARCH libglib2.0-dev:$CROSS_DEB_ARCH"
]

[target.aarch64-unknown-linux-gnu.env]
passthrough = ["CARGO_REGISTRIES_CRATES_IO_PROTOCOL"]
